<?php

namespace webignition\BasilCliCompiler\Generated;

use webignition\BasilCliCompiler\Tests\Integration\AbstractGeneratedTestCase;

class IndexPageOpenTest extends AbstractGeneratedTestCase
{
    public static function setUpBeforeClass(): void
    {
        parent::setUpBeforeClass();
        self::$client->request('GET', 'http://127.0.0.1:9080/index.html');
        self::setBasilTestPath('/tests/Fixtures/basil-integration/Test/index-page-open.yml');
    }

    public function test1()
    {
        $this->setBasilStepName('verify page is open');
        $this->setCurrentDataSet(null);

        // $page.url is "http://127.0.0.1:9080/index.html"
        $this->handledStatements[] = $this->assertionFactory->createFromJson('{
            "statement-type": "assertion",
            "source": "$page.url is \\"http:\\/\\/127.0.0.1:9080\\/index.html\\"",
            "identifier": "$page.url",
            "operator": "is",
            "value": "\\"http:\\/\\/127.0.0.1:9080\\/index.html\\""
        }');
        $this->setExpectedValue("http://127.0.0.1:9080/index.html" ?? null);
        $this->setExaminedValue(self::$client->getCurrentURL() ?? null);
        $this->assertEquals(
            $this->getExpectedValue(),
            $this->getExaminedValue()
        );
    }
}
